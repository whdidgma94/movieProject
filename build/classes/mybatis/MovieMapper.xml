<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.movie">

	<resultMap id="movie" type="Movie.MovieVO">
		<id property="movieCd" column="movieCd" />
		<result property="movieNm" column="movieNm" />
		<result property="genreNm" column="genreNm" />
		<result property="watchGradeNm" column="watchGradeNm" />
		<result property="openDt" column="openDt" />
		<result property="director" column="director" />
		<result property="actor" column="actor" />
		<result property="showTm" column="showTm" />
		<result property="showTypeNm" column="showTypeNm" />
		<result property="grade" column="grade" />
		<result property="audiCnt" column="audiCnt" />
	</resultMap>

	<select id="getAllMovie" resultMap="movie">
		select * from movie
	</select>

	<select id="getOneMovie" parameterType="Integer"
		resultType="movie">
		select * from movie where movieCd = #{movieCd}
	</select>

	<select id="getSearchMovie" parameterType="String"
		resultType="movie">
		select * from movie where movieNm like CONCAT('%',
		#{inputVal}, '%')
	</select>

	<select id="movieRankList" resultMap="movie">
		select * from movie order
		by audiCnt desc;
	</select>
	<select id="genreMovieList" parameterType="String"
		resultMap="movie">
		select * from movie where genreNm like CONCAT('%',
		#{genreNm}, '%')
	</select>
	<select id="getGenreList" resultType="String">
		select genreNm from movie
	</select>

	<insert id="insertMovie" parameterType="movie">
		INSERT INTO movie
		(movieCd, movieNm, genreNm, watchGradeNm,openDt, director,
		actor,showTm,showTypeNm,grade,audiCnt)
		VALUES(
		#{movieCd},
		#{movieNm},
		#{genreNm},
		#{watchGradeNm},
		#{openDt},
		#{director},
		#{actor},
		#{showTm},
		#{showTypeNm},
		#{grade},
		#{audiCnt}
		)
	</insert>

	<delete id="deleteMovie" parameterType="Integer">
		delete from movie where
		movieCd=#{movieCd}
	</delete>


</mapper>